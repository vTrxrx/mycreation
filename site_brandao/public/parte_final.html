<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Luta!</title>
    <link rel="stylesheet" href="css/estilo.css">
</head>

<body>
    <div id="butt">
        <button type="button" id="btn_entrar" onclick="start(), entrar()">INICIAR LUTA</button>
    </div>
    <div id="final" style="display:none" class="format">
        <div class="format">
            <div id="contagem" class="titulo"></div>
        </div>
        <div style="display:none" id="recomecar">
            <div id="winner" class="row confirmation cursor"></div>
            <a href="joguin.html" class="confirmation">Jogar novamente</a>
        </div>
        <div class="border">
            <div class="format">
                <div class="titulo" id="pl1">
                    PLAYER1
                </div>
            </div>
            <div class="row">
                <div class="row">
                    <div class="row">
                        <img src="" id="play1" class="img_final">
                    </div>
                    <div class="row">
                        <button id="play1_div" class="barra_vida"></button>
                    </div>
                    <div class="row">
                        <button type="button" class="confirmation cursor" id="btn_play1"
                            onclick="apanhar(play1_div, play1, selecionado2)">Player1 utilize a tecla
                            Q</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="border">
            <div class="format">
                <div class="titulo" id="pl2">
                    PLAYER2
                </div>
            </div>
            <div class="row">
                <div class="row">
                    <div class="row">
                        <img src="" id="play2" class="img_final">
                    </div>
                    <div class="row">
                        <button id="play2_div" class="barra_vida"></button>
                    </div>
                    <div class="row">
                        <button type="button" class="confirmation cursor" id="btn_play2"
                            onclick="apanhar(play2_div, play2, selecionado)">Player2 utilize a tecla P
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    //temporizador
    var count = 6;

    function start() {
        if (count >= 0) {
            count--;
            if (Number(count) == 0) {
                count = "PREPAREM-SE";
            }
            else if (count < 10) {
                count = "0" + count;
            }
            contagem.innerHTML = count;
            setTimeout('start(); som1.play();', 1000);
            butt.style.display = 'none';
            final.style.display = 'inline'
        }
        else {
            som2.play();
            contagem.style.display = 'none';
        }
    }


    // FUNCTION BUTTON USING PARAMETERS - APANHAR

    function apanhar(bnc, imge, pers) {


        var tamanho = parseInt(bnc.style.width) - 25;
        bnc.style.width = tamanho + "px";

        if (tamanho == 0) {
            imge.src = 'pers/caixao.jpg'
            bnc.style.color = 'red';
        };
        if (play1_div.style.width == 0 + "px") {
            winner.style.display = "inline";
            winner.innerHTML = `<label> Player2 é o vencedor </label>`;
            bnc.style.display = "none";
        };
        if (play2_div.style.width == 0 + "px") {
            winner.style.display = "inline";
            winner.innerHTML = ` <label> Player1 é o vencedor </label>`;
            bnc.style.display = "none";
        }

    }


    //evento quando pressionada a tecla específica
    window.addEventListener("keydown", checkKeyPress, false);

    var tam = 25;

    function checkKeyPress(key) {
        //player 2, tecla P
        if (key.keyCode == "81") {            
            var tamanho = parseInt(play2_div.style.width) - tam;

            play2_div.style.width = tamanho + "px";

            if (tamanho == 0) {
                play2.src = 'pers/caixao.jpg'
                winner.innerHTML = ` ${pl1.innerHTML} é o vencedor `;
                winner.style.display = "inline";
                play2_div.style.display = "none";
                recomecar.style.display = "inline";
                tam = 0;
            }
        }
        //player 1, tecla Q
        if (key.keyCode == "80") {
            var tamanho = parseInt(play1_div.style.width) - tam;

            play1_div.style.width = tamanho + "px";

            if (tamanho == 0) {
                play1.src = 'pers/caixao.jpg'
                winner.innerHTML = ` ${pl2.innerHTML} é o vencedor `;
                winner.style.display = "inline";
                play1_div.style.display = "none";
                recomecar.style.display = "inline";
                tam = 0;
            }
        }
    }
</script>

<script type="text/javascript" src="js/parte2.js"></script>

</html>